syntax = "proto3";

package fooddelivery.v1;

option go_package = "github.com/example/food-delivery/api/proto/fooddelivery/v1";

// OrderService provides gRPC endpoints for order management.
service OrderService {
  // GetOrder retrieves an order by ID.
  rpc GetOrder(GetOrderRequest) returns (Order);
  
  // CreateOrder creates a new order.
  rpc CreateOrder(CreateOrderRequest) returns (Order);
  
  // ListOrders lists orders with optional filters.
  rpc ListOrders(ListOrdersRequest) returns (ListOrdersResponse);
}

// GetOrderRequest is the request to get an order.
message GetOrderRequest {
  string order_id = 1;
}

// CreateOrderRequest is the request to create an order.
message CreateOrderRequest {
  string user_id = 1;
  string restaurant_id = 2;
  repeated OrderItem items = 3;
}

// ListOrdersRequest is the request to list orders.
message ListOrdersRequest {
  string user_id = 1;  // Optional: filter by user
  string status = 2;   // Optional: filter by status
  int32 page = 3;      // Page number (default: 1)
  int32 page_size = 4; // Page size (default: 20)
}

// ListOrdersResponse is the response containing a list of orders.
message ListOrdersResponse {
  repeated Order orders = 1;
  int32 total = 2;
  int32 page = 3;
  int32 page_size = 4;
}

// Order represents an order in the system.
message Order {
  string id = 1;
  string user_id = 2;
  string restaurant_id = 3;
  string status = 4;
  repeated OrderItem items = 5;
  double total = 6;
  string created_at = 7;
  string updated_at = 8;
}

// OrderItem represents an item in an order.
message OrderItem {
  string product_id = 1;
  string product_name = 2;
  int32 quantity = 3;
  double price = 4;
}

